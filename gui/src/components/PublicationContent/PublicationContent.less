@import (reference) "~theme-styles";
@import (reference) "../presentation/styles/TopBar.less";
@import (reference) "../presentation/styles/Error.less";

@tocWidth: 300px;
@contentNavWidth: 210px;
@defaultMargin: 15px;
.sdl-dita-delivery-publication-content {
    position: relative;
    height: 100%;
    .sdl-dita-delivery-page {
        max-width: @screenXl;
        margin: 0 auto;
        position: relative;
        .sdl-dita-delivery-navigation-menu {
            width: @tocWidth;
            position: absolute;
            left: 0;
            .sdl-dita-delivery-app.rtl & {
                right: 0;
            }
            nav.sdl-dita-delivery-toc {
                width: @tocWidth - (@defaultMargin * 2);
                margin-left: @defaultMargin;
                margin-right: @defaultMargin;
                >span:first-child,
                .sdl-treeview {
                    // Inherit max-height from toc panel, needed for scroll bar / separator using vertical space
                    max-height: inherit;
                    width: @tocWidth - (@defaultMargin * 2);
                }
                .separator {
                    position: absolute;
                    top: 0;
                    bottom: 0;
                    margin-left: @tocWidth - 5;
                    width: 10px;
                    box-shadow: -5px 0px 10px 0px fade(@neutralColor1, 10);
                    .sdl-dita-delivery-app.rtl & {
                        margin-left: 0;
                        margin-right: @tocWidth - 5;
                        box-shadow: 5px 0px 10px 0px fade(@neutralColor1, 10);
                    }
                }
            }
        }
        .sdl-dita-delivery-content-navigation {
            width: @contentNavWidth;
            float: right;
            .sdl-dita-delivery-app.rtl & {
                float: left;
            }
            overflow: auto;
        }
        nav.sdl-dita-delivery-toc,
        nav.sdl-dita-delivery-content-navigation {
            min-height: 100px;
        }
        @media screen and (min-width: (1+@screenMd)) {
            .sdl-dita-delivery-navigation-menu {
                /* Remove transition and zindex */
                transition: none;
                z-index: auto;
            }
        }
        @media screen and (min-width: (1+@screenLg)) {
            .sdl-dita-delivery-content-navigation-wrapper {
                top: 0;
                position: absolute;
                left: calc(100% ~"-" @contentNavWidth);
                .sdl-dita-delivery-app.rtl & {
                    left: @contentNavWidth;
                }
                height: 100%;
            }
        }
        .sdl-dita-delivery-breadcrumbs,
        .sdl-dita-delivery-version-selector {
            padding-bottom: 15px;
            margin-left: @tocWidth + @defaultMargin;
            margin-right: @contentNavWidth + @defaultMargin;
            .sdl-dita-delivery-app.rtl & {
                margin-right: @tocWidth + @defaultMargin;
                margin-left: @contentNavWidth + @defaultMargin;
            }
        }
        article.page-content {
            margin-left: @tocWidth + @defaultMargin;
            margin-right: @contentNavWidth + @defaultMargin;
            .sdl-dita-delivery-app.rtl & {
                margin-left: @contentNavWidth + @defaultMargin;
                margin-right: @tocWidth + @defaultMargin;
            }
            min-height: 100px;
        }
        .sdl-dita-delivery-error {
            width: auto;
            max-width: none;
            @media screen and (max-width: @screenSm) {
                margin: 19px 10px;
            }
            @media screen and (min-width: @screenSm) {
                margin: 19px 10px 34px @tocWidth + @defaultMargin * 2;
                .sdl-dita-delivery-app.rtl & {
                    margin: 19px @tocWidth + @defaultMargin * 2 34px 10px;
                }
            }
        }
    }
}

@media screen and (max-width: @screenLg) {
    .sdl-dita-delivery-publication-content {
        .sdl-dita-delivery-page {
            .sdl-dita-delivery-breadcrumbs,
            .sdl-dita-delivery-version-selector,
            article.page-content {
                margin-right: 0;
                .sdl-dita-delivery-app.rtl & {
                    margin-left: 0;
                }
            }
            nav.sdl-dita-delivery-content-navigation {
                float: none;
                max-width:~"calc(100% - @{tocWidth} - (@{defaultMargin} * 2))";
                min-width:~"calc(80% - @{tocWidth} - (@{defaultMargin} * 2))";
                margin-left: @tocWidth + (@defaultMargin * 2);
                .sdl-dita-delivery-app.rtl & {
                    float: none;
                    margin-left: 0;
                    margin-right: @tocWidth + (@defaultMargin * 2);
                }
            }
        }
    }
}

@media screen and (max-width: @screenMd) {
    .sdl-dita-delivery-publication-content {
        .sdl-dita-delivery-page {
            position: initial;
            .sdl-dita-delivery-navigation-menu {
                position: fixed;
                left: @tocWidth * -1;
                .sdl-dita-delivery-app.rtl & {
                    left: auto;
                    right: @tocWidth * -1;
                }
                &.open {
                    left: 0;
                    .sdl-dita-delivery-app.rtl & {
                        left: auto;
                        right: 0;
                    }
                }
                nav.sdl-dita-delivery-toc {
                    margin: 0;
                    height: 100%;
                    >span:first-child,
                    .sdl-treeview {
                        width: 100%;
                    }
                    .separator {
                        display: none;
                    }
                }
            }
            .sdl-dita-delivery-breadcrumbs,
            .sdl-dita-delivery-version-selector,
            article.page-content,
            nav.sdl-dita-delivery-content-navigation {
                margin-left: 0;
                .sdl-dita-delivery-app.rtl & {
                    margin-right: 0;
                }
            }
            .sdl-dita-delivery-breadcrumbs {
                padding-bottom: @defaultMargin;
            }
            nav.sdl-dita-delivery-content-navigation {
                max-width:~"calc(100% - @{defaultMargin})";
                width:~"calc(100% - @{defaultMargin})";
                margin-left: @defaultMargin;
                .sdl-dita-delivery-app.rtl & {
                    margin-left: 0;
                    margin-right: @defaultMargin;
                }
            }
        }
    }
}
